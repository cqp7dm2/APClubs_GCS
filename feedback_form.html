<!DOCTYPE html>
<html>

<head>
    <title>Contact us - Submit your feedback</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">

    <!--Firebase-->
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-firestore.js"></script>

    <!-- Nav bootstap & resources -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="js/loggedinstate.js"></script>

</head>

<body>
    <header>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <!-- Brand -->
            <a class="navbar-brand" href="home.html">APClubs</a>

            <!-- Links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="Club_Search_Result.html">Clubs & Society</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Classroom Booking</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="user_events.html">Events</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="feedback_form.html">Enquiry & Feedback</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="club registration form.html">Club Registration</a>
                </li>

                <!-- Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                        Signed In
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="userProfile.html">My Profile</a>
                        <a class="dropdown-item" id="adminbtn" href="admin/admin.html">Admin</a>
                        <a class="dropdown-item" id="committeebtn" href="CommiteeM/commMember.html">Committee</a>
                        <a class="dropdown-item" href="#" onclick="logout()">Sign Out</a>
                    </div>
                </li>
            </ul>
        </nav>
        <!-- Navbar -->

    </header>
    <br />

    <div class="container">
        <h3>Contact Us & Feedback Form</h3>
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="tp_No">TP Number</label>
            <input type="text" name="tp_No" id="tp_No" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="text" name="email" id="email" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="messages">Message</label>
            <input type="text" name="messages" id="messages" class="form-control" required>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-success" id="btn_submit">Submit</button>
        </div>
    </div>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
        const firebaseConfig = {
            apiKey: "AIzaSyCtllaNW3ao2Gnel0LjGr00wYoO9dC9c5I",
            authDomain: "apclubs-678c7.firebaseapp.com",
            databaseURL: "https://apclubs-678c7-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "apclubs-678c7",
            storageBucket: "apclubs-678c7.appspot.com",
            messagingSenderId: "711066755172",
            appId: "1:711066755172:web:8187fe865e562d32807f71",
            measurementId: "G-NCK9V02TE8"
        };
        const app = initializeApp(firebaseConfig);

        import { getDatabase, ref, set }
            from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";
        const db = getDatabase();

        var Name = document.getElementById("name");
        var Tp_no = document.getElementById("tp_No");
        var Email = document.getElementById("email");
        var Message = document.getElementById("messages")

        var btn = document.getElementById("btn_submit");


        var uid = Math.floor(Math.random() * Math.floor(Math.random() * Date.now()));

        function InsertData() {
            //set(ref(db,"feedback"),{
            //    fid: uid,
            //})
            set(ref(db, "feedback/" + uid), {
                name: Name.value,
                tp_No: Tp_no.value,
                email: Email.value,
                message: Message.value,
            })
                .then(() => {
                    alert("data stored successfully");
                })
                .catch((error) => {
                    alert("unsuccessful,error" + error);
                });
        }

        btn.addEventListener("click", InsertData);
    </script>
    <script>
        function logout() {
            window.alert("You have signed out successfully");
            window.location.href = "login.html";
            firebase.auth().signOut().then(() => {
            }).catch((error) => {
                console.log(error);
            });
        };
    </script>
</body>

</html>